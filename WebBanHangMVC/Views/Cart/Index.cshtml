@model List<WebBanHangMVC.Models.CartItem>

@{
    ViewData["Title"] = "Giỏ hàng";
    Layout = "_Layout";
    decimal total = Model.Sum(item => item.Quantity * item.Price);
}

<!-- Thêm CDN của Bootstrap nếu chưa có -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="@Url.Content("~/css/site.css")" />

<div class="container mt-5">
    <h2 class="my-4 text-center">🛒 Giỏ hàng của bạn</h2>

    @if (Model.Count == 0)
    {
            <p class="text-center">Giỏ hàng trống.</p>
    }
    else
    {
            <table class="table table-striped table-bordered">
                <thead class="table-dark">
                    <tr>
                        <th>Hình ảnh</th>
                        <th>Sản phẩm</th>
                        <th>Đơn giá</th>
                        <th>Số lượng</th>
                        <th>Tổng giá</th>
                        <th>Hành động</th>
                    </tr>
                </thead>
                <tbody>
                @foreach (var item in Model)
                {
                            <tr>
                                <td>
                                    <img src="@item.ImageUrl" alt="@item.ProductName" style="width: 100px; height: auto;" class="img-fluid" />
                                </td>
                                <td>@item.ProductName</td>
                                <td>@item.Price.ToString("N0") đ</td>
                                <td>@item.Quantity</td>
                                <td>@((item.Quantity * item.Price).ToString("N0")) đ</td>
                                <td>
                                    <button class="btn btn-danger btn-sm">Xóa</button>
                                </td>
                            </tr>
                }
                </tbody>
            </table>

            <div class="row mt-4">
                <div class="col-md-6"></div>
                <div class="col-md-6 text-end">
                    <h4>Tổng cộng: <span class="text-danger fw-bold">@total.ToString("N0") đ</span></h4>

                    <!-- Nút thanh toán -->
                    <a href="@Url.Action("Checkout", "Cart")" class="btn btn-success btn-lg mt-3">
                        <i class="bi bi-credit-card"></i> Thanh toán
                    </a>
                </div>
            </div>
    }
</div>
